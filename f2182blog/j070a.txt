1
00:00:00,780 --> 00:00:03,330
Welcome to Jeremy’s IT Lab.

2
00:00:03,330 --> 00:00:06,750
This is a free, complete course for the CCNA.

3
00:00:06,750 --> 00:00:10,530
If you like these videos, please subscribe
to follow along with the series.

4
00:00:10,530 --> 00:00:15,219
Also, please like and leave a comment, and
share the video to help spread this free series

5
00:00:15,219 --> 00:00:16,400
of videos.

6
00:00:16,400 --> 00:00:18,680
Thanks for your help.

7
00:00:18,680 --> 00:00:22,870
In this video we will cover NTP, Network Time
Protocol.

8
00:00:22,870 --> 00:00:27,520
All computers have an internal clock, including
network devices.

9
00:00:27,520 --> 00:00:31,340
For a variety of reasons that we will cover
in this video, it’s important that these

10
00:00:31,340 --> 00:00:35,690
devices have an accurate clock that is synchronized
with other devices.

11
00:00:35,690 --> 00:00:38,449
That’s the purpose of NTP.

12
00:00:38,449 --> 00:00:44,909
NTP is covered in exam topic 4.2, which says
that you must be able to configure and verify

13
00:00:44,909 --> 00:00:49,589
NTP operating in client and server mode.

14
00:00:49,589 --> 00:00:53,629
Over the next section of the course I will
be covering all of these subtopics in section

15
00:00:53,629 --> 00:00:56,210
4.0, IP Services.

16
00:00:56,210 --> 00:00:58,370
This video on NTP will be the first.

17
00:00:58,370 --> 00:01:02,719
Here’s what we’ll cover in this video.

18
00:01:02,719 --> 00:01:07,290
First I’ll briefly explain why time is important
for network devices.

19
00:01:07,290 --> 00:01:13,049
Then I’ll show you how to manually configure
the time on a device, without using NTP.

20
00:01:13,049 --> 00:01:17,900
Then we’ll cover the basics of NTP, Network
Time Protocol.

21
00:01:17,900 --> 00:01:22,369
Finally I’ll show you how to configure NTP
on Cisco devices.

22
00:01:22,369 --> 00:01:26,539
Make sure to watch until the end of the video
for a bonus question from Boson Software’s

23
00:01:26,539 --> 00:01:29,049
ExSim for CCNA.

24
00:01:29,049 --> 00:01:34,420
ExSim practice exams simulate the style and
difficulty of the real CCNA better than any

25
00:01:34,420 --> 00:01:36,439
other practice exams.

26
00:01:36,439 --> 00:01:39,880
I used them myself, and I highly recommend
them.

27
00:01:39,880 --> 00:01:44,560
If you want to get Boson ExSim, follow the
link in the video description.

28
00:01:44,560 --> 00:01:51,340
First, let me briefly introduce time on network
devices and why it’s important.

29
00:01:51,340 --> 00:01:53,590
All devices have an internal clock.

30
00:01:53,590 --> 00:01:58,619
That includes routers, switches, your PC,
smart phones, whatever.

31
00:01:58,619 --> 00:02:02,909
In Cisco IOS, you can view the time with the
SHOW CLOCK command.

32
00:02:02,909 --> 00:02:05,109
Here’s some sample output.

33
00:02:05,109 --> 00:02:12,010
So, I used this command at 12:16 AM, 0 seconds,
857 milliseconds.

34
00:02:12,010 --> 00:02:15,280
On Saturday, December 26th 2020.

35
00:02:15,280 --> 00:02:18,600
The time zone is the default of UTC.

36
00:02:18,600 --> 00:02:24,250
Remember that, the default time zone is UTC,
Coordinated Universal Time.

37
00:02:24,250 --> 00:02:29,770
If you use the SHOW CLOCK DETAIL command you
can see the time source of the device.

38
00:02:29,770 --> 00:02:34,390
In this case it is using the hardware calendar
as its time source.

39
00:02:34,390 --> 00:02:38,519
The hardware calendar is the built-in internal
clock of the device.

40
00:02:38,519 --> 00:02:40,620
This is the time source by default.

41
00:02:40,620 --> 00:02:43,880
However, notice this asterisk here.

42
00:02:43,880 --> 00:02:47,440
It means that this time is not considered
authoritative.

43
00:02:47,440 --> 00:02:51,260
The device isn’t confident that this time
is accurate.

44
00:02:51,260 --> 00:02:55,970
The internal hardware clock of a device will
drift over time, so it is not the ideal time

45
00:02:55,970 --> 00:02:56,970
source.

46
00:02:56,970 --> 00:03:01,440
Now, why is it important to have an accurate
time source?

47
00:03:01,440 --> 00:03:07,010
From a CCNA perspective, or really the perspective
of most network engineers, the most important

48
00:03:07,010 --> 00:03:13,460
reason to have accurate time on a device is
to have accurate logs for troubleshooting.

49
00:03:13,460 --> 00:03:18,820
Devices keep logs of various events that occur,
such as an interface being enabled or disabled,

50
00:03:18,820 --> 00:03:24,590
OSPF neighbor relationships being formed or
broken, device restarts, etc.

51
00:03:24,590 --> 00:03:30,610
Syslog, the protocol used to keep device logs,
is a CCNA exam topic and will be covered in

52
00:03:30,610 --> 00:03:32,319
a later video.

53
00:03:32,319 --> 00:03:36,700
But let’s take a quick look at some device
logs now.

54
00:03:36,700 --> 00:03:40,189
The command to view a device’s logs is SHOW
LOGGING.

55
00:03:40,189 --> 00:03:46,079
Let’s say I’m a network admin and I got
a phone call around 1AM saying that the network

56
00:03:46,079 --> 00:03:47,959
connection has been unstable.

57
00:03:47,959 --> 00:03:52,900
So, to investigate I log into one of the devices
and check the logs.

58
00:03:52,900 --> 00:03:57,849
Here’s a portion of the output from one
of the devices, R2.

59
00:03:57,849 --> 00:04:02,209
Notice this series of messages about OSPF
neighbor relationships.

60
00:04:02,209 --> 00:04:07,489
There are multiple messages about neighbor
10.0.0.6 moving to the FULL state and to the

61
00:04:07,489 --> 00:04:09,230
DOWN state.

62
00:04:09,230 --> 00:04:14,620
You can see the timestamps here, indicating
when these events occurred, from about 1:06AM

63
00:04:14,620 --> 00:04:16,910
to 1:09AM.

64
00:04:16,910 --> 00:04:21,560
Note that I will cover these log messages
in depth in a later lesson about Syslog, so

65
00:04:21,560 --> 00:04:23,290
don’t worry about the details for now.

66
00:04:23,290 --> 00:04:25,840
I just want to show why time is important.

67
00:04:25,840 --> 00:04:32,509
Anyway, I then checked the device’s clock
and the current time is 1:17AM on December

68
00:04:32,509 --> 00:04:35,030
27th 2020.

69
00:04:35,030 --> 00:04:41,970
Then I log into R2’s neighbor 10.0.0.6,
which in this case is R3, to investigate further.

70
00:04:41,970 --> 00:04:45,250
Here’s some of the output from SHOW LOGGING.

71
00:04:45,250 --> 00:04:49,720
You can see those same messages about an OSPF
neighbor moving between the FULL and DOWN

72
00:04:49,720 --> 00:04:53,970
states, and also some messages about an interface
going UP and DOWN.

73
00:04:53,970 --> 00:04:59,340
However, the timestamps show a totally different
time than on R2.

74
00:04:59,340 --> 00:05:06,720
After checking the clock I realize that R3
thinks it’s 4:30PM on May 23rd 2008.

75
00:05:06,720 --> 00:05:11,520
This is going to make it much more difficult
to correlate the logs of these devices.

76
00:05:11,520 --> 00:05:14,050
In this case, it’s a fairly simple issue.

77
00:05:14,050 --> 00:05:18,720
We can see that an interface going down caused
some problems, so we can investigate why that

78
00:05:18,720 --> 00:05:19,810
happened.

79
00:05:19,810 --> 00:05:23,840
But when you have to troubleshoot more complex
issues on devices with logs full of thousands

80
00:05:23,840 --> 00:05:30,470
of messages, it gets much more difficult and
accurate time is very important.

81
00:05:30,470 --> 00:05:34,370
So let’s see how to manually configure the
time on a device.

82
00:05:34,370 --> 00:05:38,750
You can manually configure the time on the
device, the clock in the software of the device,

83
00:05:38,750 --> 00:05:41,330
with the CLOCK SET command.

84
00:05:41,330 --> 00:05:42,900
Let me walk you through it.

85
00:05:42,900 --> 00:05:47,880
I entered CLOCK SET and used the question
mark to see the options.

86
00:05:47,880 --> 00:05:52,490
Using the format of hours, minutes, seconds,
I entered the time.

87
00:05:52,490 --> 00:05:56,310
The next option is either the day of the month
or the month itself.

88
00:05:56,310 --> 00:05:58,410
You can enter them in either order.

89
00:05:58,410 --> 00:06:01,639
I entered the day first, and then the month.

90
00:06:01,639 --> 00:06:03,610
The next option is the year.

91
00:06:03,610 --> 00:06:07,510
I entered the year, 2020, and checked the
options.

92
00:06:07,510 --> 00:06:12,850
CR, carriage return, basically means press
the enter key to enter the command.

93
00:06:12,850 --> 00:06:15,020
There are no other options.

94
00:06:15,020 --> 00:06:20,040
After entering the time I checked with SHOW
CLOCK DETAIL, and the newly configured time

95
00:06:20,040 --> 00:06:21,740
is displayed.

96
00:06:21,740 --> 00:06:26,500
The time source also has changed to ‘user
configuration’.

97
00:06:26,500 --> 00:06:30,170
Notice that all of these commands are done
from privileged-exec mode, not global config

98
00:06:30,170 --> 00:06:31,569
mode.

99
00:06:31,569 --> 00:06:35,170
These clock configurations aren’t part of
the device’s running configuration, they

100
00:06:35,170 --> 00:06:36,420
are separate.

101
00:06:36,420 --> 00:06:40,560
Here’s one more point a lot of people might
not be aware of.

102
00:06:40,560 --> 00:06:45,550
Although the hardware calendar (the built-in
clock) is the default time-source, the hardware

103
00:06:45,550 --> 00:06:50,110
clock and software clock are separate and
can be configured separately.

104
00:06:50,110 --> 00:06:54,259
So let’s see how to configure the hardware
clock.

105
00:06:54,259 --> 00:06:58,490
You can manually configure the hardware clock
with the CALENDAR SET command.

106
00:06:58,490 --> 00:07:03,520
So, from now on I will use the term ‘clock’
to refer to the clock in the software of the

107
00:07:03,520 --> 00:07:07,259
device, and ‘calendar’ to refer to the
hardware clock.

108
00:07:07,259 --> 00:07:13,720
So, the command syntax is the same as CLOCK
SET, only the keyword CALENDAR is different.

109
00:07:13,720 --> 00:07:16,340
Set the time, and then either the day or the
month.

110
00:07:16,340 --> 00:07:21,430
I set the day, and then the month, and the
next option is the year.

111
00:07:21,430 --> 00:07:26,630
Then I set the year, and then used the command
SHOW CALENDAR to view the time.

112
00:07:26,630 --> 00:07:29,800
Typically you want to synchronize the clock
and calendar.

113
00:07:29,800 --> 00:07:32,720
I can’t think of a good reason not to sync
them.

114
00:07:32,720 --> 00:07:37,990
Use the command CLOCK UPDATE-CALENDAR to sync
the calendar to the clock’s time.

115
00:07:37,990 --> 00:07:40,849
The calendar will update its time to match
the clock.

116
00:07:40,849 --> 00:07:46,970
Or, use the command CLOCK READ-CALENDAR to
sync the clock to the calendar’s time.

117
00:07:46,970 --> 00:07:50,850
In this case the clock will update its time
to match the calendar.

118
00:07:50,850 --> 00:07:53,620
Let me demonstrate.

119
00:07:53,620 --> 00:07:56,590
First let me demonstrate CLOCK UPDATE-CALENDAR.

120
00:07:56,590 --> 00:08:03,250
I viewed R2’s clock, and the time was about
2:38 PM on December 27th 2020, and let’s

121
00:08:03,250 --> 00:08:05,690
say that’s the correct time.

122
00:08:05,690 --> 00:08:07,590
However the calendar was about 12:00AM.

123
00:08:07,590 --> 00:08:11,720
So, I used the CLOCK UPDATE-CALENDAR command.

124
00:08:11,720 --> 00:08:16,610
And now you can see the calendar has been
updated to match the time of the clock.

125
00:08:16,610 --> 00:08:21,310
Next let’s see the opposite situation, when
the calendar’s time is correct but the clock’s

126
00:08:21,310 --> 00:08:23,259
time is incorrect.

127
00:08:23,259 --> 00:08:27,960
The clock says it’s about 12AM on September
6th 1993.

128
00:08:27,960 --> 00:08:33,340
The calendar has the correct time of 2:55PM
on December 27th 2020.

129
00:08:33,340 --> 00:08:37,440
So, I used the command CLOCK READ-CALENDAR.

130
00:08:37,440 --> 00:08:42,330
And the clock updated its time to match the
calendar’s time.

131
00:08:42,330 --> 00:08:45,010
Next let’s see how to configure the timezone.

132
00:08:45,010 --> 00:08:48,800
You can configure the time zone with the CLOCK
TIMEZONE command.

133
00:08:48,800 --> 00:08:50,890
Let me walk you through it.

134
00:08:50,890 --> 00:08:56,220
First I used the DO SHOW CLOCK command to
view the time, around 3:13PM in the default

135
00:08:56,220 --> 00:08:58,720
time zone of UTC.

136
00:08:58,720 --> 00:09:03,800
Notice I used DO SHOW CLOCK from global config
mode, not privileged exec mode like the other

137
00:09:03,800 --> 00:09:04,800
commands.

138
00:09:04,800 --> 00:09:08,840
That’s because the timezone is configured
from global config mode and becomes part of

139
00:09:08,840 --> 00:09:10,770
the running config of the device.

140
00:09:10,770 --> 00:09:14,650
So, here’s the CLOCK TIMEZONE command.

141
00:09:14,650 --> 00:09:17,330
The first option is the name of the time zone.

142
00:09:17,330 --> 00:09:21,070
This is just a word, the device doesn’t
actually check if it’s the name of a real

143
00:09:21,070 --> 00:09:22,070
time zone.

144
00:09:22,070 --> 00:09:28,460
So, I configured JST for Japan Standard Time,
and the next option is the hours offset from

145
00:09:28,460 --> 00:09:30,340
UTC.

146
00:09:30,340 --> 00:09:37,130
JST is 9 hours ahead of UTC, so I entered
9 and checked the options.

147
00:09:37,130 --> 00:09:42,510
For JST I don’t have to enter the minutes
offset, so I entered the command as is, CLOCK

148
00:09:42,510 --> 00:09:45,130
TIMEZONE JST 9.

149
00:09:45,130 --> 00:09:47,390
Then I viewed the clock.

150
00:09:47,390 --> 00:09:52,600
Notice the time zone has changed from UTC
to JST, but also the time itself has jumped

151
00:09:52,600 --> 00:09:54,530
9 hours ahead.

152
00:09:54,530 --> 00:09:58,750
This is because the previous time configurations
were done in UTC.

153
00:09:58,750 --> 00:10:04,480
When changing the time zone to JST, 9 hours
ahead, the clock automatically changed.

154
00:10:04,480 --> 00:10:10,600
But currently the time actually is about 3:15
PM JST, so I adjusted the clock once more,

155
00:10:10,600 --> 00:10:14,520
and now it displays the correct time in the
correct time zone.

156
00:10:14,520 --> 00:10:20,260
The time zone is important because, as you’ll
see soon, NTP only uses UTC, so you have to

157
00:10:20,260 --> 00:10:23,570
adjust each device to the correct time zone.

158
00:10:23,570 --> 00:10:28,540
There’s one more aspect of manual time configuration
to cover.

159
00:10:28,540 --> 00:10:33,690
That is daylight saving time, also known as
summer time, depending on the country.

160
00:10:33,690 --> 00:10:38,790
Not all countries do this, but in many countries
we adjust our clocks forward once a year and

161
00:10:38,790 --> 00:10:40,790
then back once a year.

162
00:10:40,790 --> 00:10:43,880
You can configure Cisco devices to do that
automatically.

163
00:10:43,880 --> 00:10:49,170
Now, I live in Japan at the moment and Japan
doesn’t do daylight saving time, so I’ll

164
00:10:49,170 --> 00:10:52,360
use my home country of Canada as an example.

165
00:10:52,360 --> 00:10:56,930
In most parts of Canada we set the clocks
forward one hour on the second Sunday of March

166
00:10:56,930 --> 00:11:03,380
at 2AM, and then set the clocks back one hour
on the first Sunday of November at 2AM.

167
00:11:03,380 --> 00:11:09,710
The command to configure this is CLOCK SUMMER-TIME,
and this is also done from global config mode.

168
00:11:09,710 --> 00:11:12,760
The first option is the name of the time zone.

169
00:11:12,760 --> 00:11:19,210
My time zone back in Canada is EST, but during
daylight saving time the name changes to EDT,

170
00:11:19,210 --> 00:11:21,500
so that’s what I set.

171
00:11:21,500 --> 00:11:26,590
Then we can set a specific date to change
to daylight saving time with the keyword DATE,

172
00:11:26,590 --> 00:11:30,090
but the more useful option is the second one,
RECURRING.

173
00:11:30,090 --> 00:11:34,920
This makes summer time start and end on the
specified days every year.

174
00:11:34,920 --> 00:11:39,320
After recurring, we specify which week in
the month it will start.

175
00:11:39,320 --> 00:11:44,520
In Canada it starts on the second Sunday of
March, so I specified 2.

176
00:11:44,520 --> 00:11:47,310
Next is the weekday, so I entered Sunday.

177
00:11:47,310 --> 00:11:51,260
After that it’s the Month, March for Canada.

178
00:11:51,260 --> 00:11:53,580
Finally the time, I entered 2AM.

179
00:11:53,580 --> 00:11:56,420
Okay, so that’s all for the start time.

180
00:11:56,420 --> 00:11:59,370
Now we enter the end of daylight saving time
in the same order.

181
00:11:59,370 --> 00:12:05,880
1 for the first week, the weekday, Sunday,
the month, November, and finally the time,

182
00:12:05,880 --> 00:12:07,390
2AM again.

183
00:12:07,390 --> 00:12:12,020
Optionally you can specify the offset, but
the default is 60 minutes and I think that’s

184
00:12:12,020 --> 00:12:13,690
what most countries use by default.

185
00:12:13,690 --> 00:12:16,820
So, that’s all for the command.

186
00:12:16,820 --> 00:12:18,620
Notice the dollar signs here.

187
00:12:18,620 --> 00:12:22,950
This command is a little long, too long for
one line, so these dollar signs mean that

188
00:12:22,950 --> 00:12:27,600
some of the output is cut off and can’t
be displayed on a single line in the terminal.

189
00:12:27,600 --> 00:12:30,510
So, I typed it out here.

190
00:12:30,510 --> 00:12:36,330
CLOCK SUMMER-TIME, the time-zone name, RECURRING,
and then the start of daylight saving time

191
00:12:36,330 --> 00:12:38,240
and the end of daylight saving time.

192
00:12:38,240 --> 00:12:41,480
Okay, that’s the CLOCK SUMMER-TIME command.

193
00:12:41,480 --> 00:12:45,950
So, that’s all for manual time configuration.

194
00:12:45,950 --> 00:12:48,350
Here are the time commands we just looked
at.

195
00:12:48,350 --> 00:12:53,000
The CLOCK SUMMER-TIME command is a little
long so I simplified the format.

196
00:12:53,000 --> 00:12:58,270
Just remember that for the ‘start’ and
‘end’ you need to specify the week, weekday,

197
00:12:58,270 --> 00:12:59,760
month, and time.

198
00:12:59,760 --> 00:13:04,060
Okay, let’s move on to the next topic.

199
00:13:04,060 --> 00:13:10,320
And the next topic is the main topic of this
video, NTP, Network Time Protocol.

200
00:13:10,320 --> 00:13:13,580
Manually configuring the time on devices is
not scalable.

201
00:13:13,580 --> 00:13:18,850
In a large network, manually configuring the
time on every router, every switch, firewall,

202
00:13:18,850 --> 00:13:24,360
PC, phone, etc, would be a huge task and a
huge waste of time.

203
00:13:24,360 --> 00:13:29,800
Not only that, the manually configured clocks
will drift, resulting in inaccurate time.

204
00:13:29,800 --> 00:13:35,790
NTP allows automatic syncing of time over
a network to NTP servers.

205
00:13:35,790 --> 00:13:40,920
The device you’re using to watch this video
is almost certainly using NTP.

206
00:13:40,920 --> 00:13:46,450
For example, on my Windows 10 PC you can see
that my computer is set to automatically synchronize

207
00:13:46,450 --> 00:13:49,180
with time.windows.com.

208
00:13:49,180 --> 00:13:52,500
That is an NTP server somewhere on the Internet.

209
00:13:52,500 --> 00:13:54,480
And actually, you can configure this.

210
00:13:54,480 --> 00:14:00,410
So, for example, if I wanted my PC to synchronize
to a different NTP server, for example Google’s

211
00:14:00,410 --> 00:14:03,910
server, I can change it here.

212
00:14:03,910 --> 00:14:09,240
This point is separate from the topic, but
those names like ‘time.windows.com’ are

213
00:14:09,240 --> 00:14:13,000
resolved to IP addresses using the protocol
DNS.

214
00:14:13,000 --> 00:14:18,480
DNS will be covered in a future video, it’s
an important CCNA topic.

215
00:14:18,480 --> 00:14:25,410
In the CLI of my Windows PC, I used the command
NSLOOKUP time.windows.com.

216
00:14:25,410 --> 00:14:30,041
It contacted the DNS server I’m using, which
is Google’s DNS server with an IP address

217
00:14:30,041 --> 00:14:32,830
of 8.8.8.8.

218
00:14:32,830 --> 00:14:35,320
Then Google’s server gave me the answer.

219
00:14:35,320 --> 00:14:39,910
The actual IP address of the Windows NTP server
is 20.43.94.199.

220
00:14:39,910 --> 00:14:46,910
I tried the same with Google’s NTP server,
NSLOOKUP time.google.com.

221
00:14:46,910 --> 00:14:54,450
Again, my PC asked the Google DNS server for
the IP address of time.google.com, and here

222
00:14:54,450 --> 00:14:56,000
is the answer.

223
00:14:56,000 --> 00:15:01,630
You can see four IPv6 addresses and four IPv4
addresses used by time.google.com.

224
00:15:01,630 --> 00:15:07,420
Anyway, DNS will be covered in detail in another
video, I just wanted to give you a little

225
00:15:07,420 --> 00:15:08,900
preview.

226
00:15:08,900 --> 00:15:11,450
Okay, back to NTP.

227
00:15:11,450 --> 00:15:17,500
So, NTP clients request the time from NTP
servers, and then they synchronize their time

228
00:15:17,500 --> 00:15:19,290
to the time of the server.

229
00:15:19,290 --> 00:15:24,240
It’s possible for a device to be an NTP
server and client at the same time.

230
00:15:24,240 --> 00:15:29,060
So, it will sync its time to a server, and
then other devices will sync their time to

231
00:15:29,060 --> 00:15:30,490
it.

232
00:15:30,490 --> 00:15:35,880
These are rough numbers, they can vary, but
NTP allows accuracy of time within about 1

233
00:15:35,880 --> 00:15:41,410
millisecond if the NTP server is in the same
LAN, or within about 50 milliseconds if connecting

234
00:15:41,410 --> 00:15:45,680
to the NTP server over a WAN or the Internet.

235
00:15:45,680 --> 00:15:47,770
Some NTP servers are ‘better’ than others.

236
00:15:47,770 --> 00:15:53,690
The ‘distance’ of an NTP server from the
original reference clock is called stratum.

237
00:15:53,690 --> 00:15:57,920
The farther away from the reference clock,
the higher the stratum.

238
00:15:57,920 --> 00:16:02,660
If the stratum level of a server is high,
it is considered less accurate.

239
00:16:02,660 --> 00:16:07,820
NTP uses UDP port 123 to communicate.

240
00:16:07,820 --> 00:16:14,220
Remember that one, in addition to the ones
we covered in the TCP&amp;UDP video.

241
00:16:14,220 --> 00:16:17,100
Let me briefly introduce those reference clocks.

242
00:16:17,100 --> 00:16:22,890
A reference clock is usually a very accurate
time device like an atomic clock or a GPS

243
00:16:22,890 --> 00:16:24,690
clock.

244
00:16:24,690 --> 00:16:28,850
Reference clocks are stratum 0 within the
NTP hierarchy.

245
00:16:28,850 --> 00:16:33,470
They are as close to the time source as possible,
because they are the time source.

246
00:16:33,470 --> 00:16:38,030
NTP servers directly connected to reference
clocks are stratum 1.

247
00:16:38,030 --> 00:16:41,850
You’ll see more about this NTP hierarchy
in the next slide.

248
00:16:41,850 --> 00:16:48,480
Here’s an example of a reference clock,
this one is from a United States Naval observatory.

249
00:16:48,480 --> 00:16:52,681
Cisco devices aren’t able to get their time
directly from a stratum 0 reference clock

250
00:16:52,681 --> 00:16:58,230
like this, but they can get their time from
a stratum 1 NTP server.

251
00:16:58,230 --> 00:17:01,850
This diagram demonstrates the NTP hierarchy.

252
00:17:01,850 --> 00:17:06,690
These reference clocks are stratum 0, they
are the original time sources like the US

253
00:17:06,690 --> 00:17:09,620
Navy clock we saw in the last slide.

254
00:17:09,620 --> 00:17:14,350
The servers directly connected to those reference
clocks are stratum 1 servers.

255
00:17:14,350 --> 00:17:18,940
Then, stratum 2 NTP servers get their time
from stratum 1 servers.

256
00:17:18,940 --> 00:17:22,210
And stratum 3 servers get their time from
stratum 2 servers.

257
00:17:22,210 --> 00:17:25,140
That’s how the NTP hierarchy works.

258
00:17:25,140 --> 00:17:28,410
However, stratum 15 is the maximum.

259
00:17:28,410 --> 00:17:34,370
Anything above that is considered unreliable
and the device will not synchronize to it.

260
00:17:34,370 --> 00:17:39,430
Another aspect of NTP shown in this diagram
is NTP peering.

261
00:17:39,430 --> 00:17:44,170
Devices can peer with devices at the same
stratum to provide more accurate time.

262
00:17:44,170 --> 00:17:49,760
This also acts as a backup, in case they lose
access to the lower-stratum NTP server.

263
00:17:49,760 --> 00:17:52,680
This mode is called ‘symmetric active’
mode.

264
00:17:52,680 --> 00:17:56,800
So, Cisco devices can operate in three NTP
modes.

265
00:17:56,800 --> 00:18:00,820
Server mode, Client mode, and symmetric active
mode.

266
00:18:00,820 --> 00:18:04,860
They can be in all three of those modes at
the same time, too.

267
00:18:04,860 --> 00:18:09,410
And finally, an NTP client can sync to multiple
servers.

268
00:18:09,410 --> 00:18:13,970
For example, in this diagram this stratum
2 server is getting its time from these two

269
00:18:13,970 --> 00:18:15,920
stratum 1 servers.

270
00:18:15,920 --> 00:18:18,930
Here’s some extra terminology you should
know.

271
00:18:18,930 --> 00:18:23,890
NTP servers which get their time directly
from reference clocks are also called primary

272
00:18:23,890 --> 00:18:25,140
servers.

273
00:18:25,140 --> 00:18:30,060
They sync their time directly to a reference
clock, they are stratum 1 servers.

274
00:18:30,060 --> 00:18:35,680
NTP servers which get their time from other
NTP servers are called secondary servers.

275
00:18:35,680 --> 00:18:39,420
They operate in server mode and client mode
at the same time.

276
00:18:39,420 --> 00:18:44,520
So, servers with stratum 2 or above are secondary
servers.

277
00:18:44,520 --> 00:18:48,550
Okay I think that’s enough lecturing, let’s
get more practical and I’ll explain some

278
00:18:48,550 --> 00:18:52,990
more aspects of NTP as we configure it on
some Cisco routers.

279
00:18:52,990 --> 00:18:56,770
Here’s the network topology I’ll be using
for this demonstration.

280
00:18:56,770 --> 00:19:02,230
I’m showing you an actual screenshot of
my GNS3 topology to show you this.

281
00:19:02,230 --> 00:19:04,160
The Internet cloud.

282
00:19:04,160 --> 00:19:08,670
Through this Internet cloud in GNS3, these
virtual routers are actually connected to

283
00:19:08,670 --> 00:19:14,390
the real Internet, and in this demonstration
I will make R1 sync to Google’s NTP servers

284
00:19:14,390 --> 00:19:16,450
over the Internet.

285
00:19:16,450 --> 00:19:21,600
This is a cool part of GNS3 that isn’t available
in simulators like Packet Tracer.

286
00:19:21,600 --> 00:19:27,000
Now, you might be wondering why this point-to-point
connection between R1 and the Internet is

287
00:19:27,000 --> 00:19:29,540
using a /24 prefix length.

288
00:19:29,540 --> 00:19:33,760
That’s just how this cloud is configured
by default in GNS3.

289
00:19:33,760 --> 00:19:38,610
For a real point-to-point connection to an
Internet Service Provider I’d use a /30

290
00:19:38,610 --> 00:19:41,920
or /31.

291
00:19:41,920 --> 00:19:45,330
So let’s configure R1 to sync to Google’s
NTP servers.

292
00:19:45,330 --> 00:19:50,390
Once again, here’s the NSLOOKUP I did for
Google’s NTP servers.

293
00:19:50,390 --> 00:19:55,740
I’ll be configuring all four of these IPv4
addresses on R1 as NTP servers.

294
00:19:55,740 --> 00:19:57,630
Here’s the command.

295
00:19:57,630 --> 00:20:01,750
NTP SERVER, followed by the server IP address.

296
00:20:01,750 --> 00:20:03,570
The order of these doesn’t matter.

297
00:20:03,570 --> 00:20:09,360
R1 will ask all of them for the time and select
whichever gives the best, quickest responses.

298
00:20:09,360 --> 00:20:13,600
And the one it selects to sync to might change
if the currently selected server’s responses

299
00:20:13,600 --> 00:20:16,890
start slowing down or it stops responding
altogether.

300
00:20:16,890 --> 00:20:22,730
So, it’s best to specify multiple NTP servers
so that R1 can always have a reliable source

301
00:20:22,730 --> 00:20:23,980
of time.

302
00:20:23,980 --> 00:20:28,690
Now, if you want to manually make the device
prefer one of the configured servers, you

303
00:20:28,690 --> 00:20:31,060
can add PREFER to the end of the command.

304
00:20:31,060 --> 00:20:39,300
So, this would make 216.239.35.0 the preferred
NTP server, and the others will be backups.

305
00:20:39,300 --> 00:20:43,730
But for this demonstration, I didn’t use
the PREFER keyword, and in the next slide

306
00:20:43,730 --> 00:20:47,800
we’ll see which of these NTP servers was
selected as the best.

307
00:20:47,800 --> 00:20:54,480
Here’s a very important SHOW command for
NTP, SHOW NTP ASSOCIATIONS.

308
00:20:54,480 --> 00:20:57,900
It shows all of the NTP servers we just configured.

309
00:20:57,900 --> 00:20:59,130
Here are the servers.

310
00:20:59,130 --> 00:21:03,500
Now, you don’t have to understand all of
the output of this command, but let me point

311
00:21:03,500 --> 00:21:05,550
out a few things.

312
00:21:05,550 --> 00:21:12,400
Notice the asterisk next to 216.239.35.0,
meaning ‘sys.peer’.

313
00:21:12,400 --> 00:21:17,590
This means that this is the NTP server that
R1 is currently syncing to.

314
00:21:17,590 --> 00:21:22,450
This plus sign next to the other servers means
they are candidates, but R1 is not currently

315
00:21:22,450 --> 00:21:24,910
syncing its time to them.

316
00:21:24,910 --> 00:21:29,160
The tilde next to all of the servers simply
means that they were configured, which I did

317
00:21:29,160 --> 00:21:33,530
in the previous slide with the NTP SERVER
command.

318
00:21:33,530 --> 00:21:39,150
If you see an NTP server marked as an ‘outlyer’
or ‘falseticker’ it means R1 will not

319
00:21:39,150 --> 00:21:44,240
sync to that server, for example R1 might
think its time is inaccurate.

320
00:21:44,240 --> 00:21:48,550
The details of these states are beyond the
CCNA, you just need to know the basics.

321
00:21:48,550 --> 00:21:52,940
Here you can see the reference clock of each
NTP server.

322
00:21:52,940 --> 00:21:57,180
All of these servers are using Google’s
own reference clock as their reference.

323
00:21:57,180 --> 00:22:02,370
That is a stratum 0 reference clock, so here
in the ‘st’ column you can see that all

324
00:22:02,370 --> 00:22:06,780
four of these servers have a stratum level
of 1.

325
00:22:06,780 --> 00:22:15,450
I used the SHOW NTP ASSOCIATIONS command again,
and now you can see that R1 has selected 216.239.35.4

326
00:22:15,450 --> 00:22:17,980
as the server it wants to sync to.

327
00:22:17,980 --> 00:22:22,640
This will constantly change as R1 continues
interacting with the servers and decides which

328
00:22:22,640 --> 00:22:25,170
one is the best to sync to.

329
00:22:25,170 --> 00:22:29,530
Now let’s look at another useful NTP SHOW
command.

330
00:22:29,530 --> 00:22:32,400
That command is SHOW NTP STATUS.

331
00:22:32,400 --> 00:22:36,301
There’s a lot of information here that you
don’t need to look at, but let’s check

332
00:22:36,301 --> 00:22:38,170
out the top line.

333
00:22:38,170 --> 00:22:40,430
Clock is synchronized, that’s good.

334
00:22:40,430 --> 00:22:45,250
It means that at least one of the NTP servers
we configured was good and R1 was able to

335
00:22:45,250 --> 00:22:46,950
sync to it.

336
00:22:46,950 --> 00:22:49,720
Stratum 2, this is R1’s stratum.

337
00:22:49,720 --> 00:22:55,000
Because R1 is synchronizing its time to Google’s
NTP severs, it automatically becomes an NTP

338
00:22:55,000 --> 00:22:59,350
server itself with a stratum level 1 higher
than Google’s NTP servers.

339
00:22:59,350 --> 00:23:03,460
So, that’s why R1’s stratum level is 2.

340
00:23:03,460 --> 00:23:06,280
Finally you can see the address of the reference
clock.

341
00:23:06,280 --> 00:23:13,820
This time it’s not 216.239.35.0 or .4, it’s
.12.

342
00:23:13,820 --> 00:23:16,930
Now let’s check R1’s clock and calendar
again.

343
00:23:16,930 --> 00:23:19,790
I used DO SHOW CLOCK DETAIL.

344
00:23:19,790 --> 00:23:23,230
The time is correct, however the time zone
is not.

345
00:23:23,230 --> 00:23:27,170
NTP uses only the UTC time zone.

346
00:23:27,170 --> 00:23:30,130
You must configure the appropriate time zone
on each device.

347
00:23:30,130 --> 00:23:34,350
I haven’t configured R1’s time zone yet,
so I’ll do that.

348
00:23:34,350 --> 00:23:38,070
I also used the DO SHOW CALENDAR command.

349
00:23:38,070 --> 00:23:41,090
Notice that the time is not synced up with
the software clock.

350
00:23:41,090 --> 00:23:46,490
NTP doesn’t update the calendar by default,
but let’s set it so that it does update

351
00:23:46,490 --> 00:23:47,490
the calendar.

352
00:23:47,490 --> 00:23:52,110
So, I configured my time zone of JST here
on R1.

353
00:23:52,110 --> 00:23:55,370
Then I used the NTP UPDATE-CALENDAR command.

354
00:23:55,370 --> 00:23:59,950
This configures the router to update the hardware
clock, the calendar, with the time learned

355
00:23:59,950 --> 00:24:01,930
via NTP.

356
00:24:01,930 --> 00:24:06,440
So I checked the clock and the calendar again,
and now they are both synced.

357
00:24:06,440 --> 00:24:09,890
You might be wondering why you would want
to sync the hardware clock.

358
00:24:09,890 --> 00:24:14,620
The hardware clock tracks the date and time
on the device even if it restarts, power is

359
00:24:14,620 --> 00:24:16,480
lost, etc.

360
00:24:16,480 --> 00:24:21,110
When the system is restarted, the hardware
clock is used to initialize the software clock.

361
00:24:21,110 --> 00:24:25,350
So, it’s a good idea to keep the hardware
clock accurate, although it’s not totally

362
00:24:25,350 --> 00:24:28,140
essential.

363
00:24:28,140 --> 00:24:33,470
Now we’re going to move on to R2 and configure
NTP on it as well.

364
00:24:33,470 --> 00:24:37,400
Usually in a small network like this you’d
just configure all of the devices to sync

365
00:24:37,400 --> 00:24:40,550
to public NTP servers like Google’s.

366
00:24:40,550 --> 00:24:46,720
But for the purpose of this lesson I’ll
configure R2 to use R1 as an NTP server.

367
00:24:46,720 --> 00:24:51,520
But before doing that, I’ll configure a
loopback interface on R1.

368
00:24:51,520 --> 00:24:56,410
Note that I’ve configured OSPF in this network
so all of these routers are sharing routes,

369
00:24:56,410 --> 00:24:59,720
including the route to R1’s loopback interface.

370
00:24:59,720 --> 00:25:06,010
I also instructed R1 to use loopback0 as the
source of its NTP messages with the NTP SOURCE

371
00:25:06,010 --> 00:25:07,860
loopback0 command.

372
00:25:07,860 --> 00:25:14,360
So, any NTP messages it sends will come from
the address 10.1.1.1.

373
00:25:14,360 --> 00:25:16,320
Why configure a loopback interface?

374
00:25:16,320 --> 00:25:24,990
Well, let’s say I configured R2 to use 10.0.0.1,
R1’s G0/1 interface, as an NTP server.

375
00:25:24,990 --> 00:25:30,180
In normal situations it would be able to send
NTP request messages and get replies from

376
00:25:30,180 --> 00:25:31,820
R1.

377
00:25:31,820 --> 00:25:34,280
But what if the interface failed for some
reason?

378
00:25:34,280 --> 00:25:41,830
R2 would suddenly lose its NTP server, because
the availability of address 10.0.0.1 is dependent

379
00:25:41,830 --> 00:25:45,760
on the status of R1’s G0/1 interface.

380
00:25:45,760 --> 00:25:52,600
But what if we configure this loopback interface
on R1 and tell R2 to use its address, 10.1.1.1,

381
00:25:52,600 --> 00:25:54,850
as its NTP server?

382
00:25:54,850 --> 00:26:01,480
Even if the closest path to R1, via R2’s
G0/0 interface, is down, R3 will still advertise

383
00:26:01,480 --> 00:26:08,000
a route to 10.1.1.1 to R2 and therefore R2
will still be able to communicate with its

384
00:26:08,000 --> 00:26:10,390
NTP server, R1.

385
00:26:10,390 --> 00:26:17,090
I gave a similar demonstration of why loopback
interfaces are useful in the OSPF videos.

386
00:26:17,090 --> 00:26:20,480
Basically they are useful because they provide
the router an address you can use to reach

387
00:26:20,480 --> 00:26:25,480
it which isn’t dependent on the status of
any particular physical interface.

388
00:26:25,480 --> 00:26:35,210
Okay, so on R2 I configured NTP SERVER 10.1.1.1,
and then checked DO SHOW NTP ASSOCIATIONS.

389
00:26:35,210 --> 00:26:41,380
Notice the asterisk next to 10.1.1.1, that
means R2 has selected R1 to sync to.

390
00:26:41,380 --> 00:26:44,500
R1’s reference clock is displayed here.

391
00:26:44,500 --> 00:26:48,980
This is the IP address of one of Google’s
NTP servers, because that’s the server that

392
00:26:48,980 --> 00:26:51,520
R1 is syncing to.

393
00:26:51,520 --> 00:26:54,830
And here R1’s stratum level of 2 is displayed.

394
00:26:54,830 --> 00:27:02,250
Google’s reference clock is stratum 0, Google’s
NTP servers are stratum 1, and now R1 is stratum

395
00:27:02,250 --> 00:27:03,250
2.

396
00:27:03,250 --> 00:27:04,970
So, what stratum is R2?

397
00:27:04,970 --> 00:27:08,820
I checked with DO SHOW NTP STATUS.

398
00:27:08,820 --> 00:27:14,710
R2’s stratum is 3, because it got its time
from a stratum 2 server, R1.

399
00:27:14,710 --> 00:27:20,990
R2’s reference of 10.1.1.1, R1, is displayed
also.

400
00:27:20,990 --> 00:27:25,911
As a reminder, remember to use the NTP SOURCE
command to specify the loopback interface

401
00:27:25,911 --> 00:27:32,490
as the source of NTP packets on R1, if you
don’t do that R2 and R3 won’t want to

402
00:27:32,490 --> 00:27:35,420
sync with R1.

403
00:27:35,420 --> 00:27:38,450
Finally I configured NTP on R3.

404
00:27:38,450 --> 00:27:40,620
Here are the configurations.

405
00:27:40,620 --> 00:27:46,480
By the way, I configured a loopback interface
on R2 as well, that’s 10.2.2.2.

406
00:27:46,480 --> 00:27:52,150
I configured both R1 and R2 as NTP servers
to demonstrate an important point.

407
00:27:52,150 --> 00:28:00,590
Between R1, 10.1.1.1, and R2, 10.2.2.2, which
NTP server do you think R3 will prefer, and

408
00:28:00,590 --> 00:28:01,590
why?

409
00:28:01,590 --> 00:28:03,290
Let’s check.

410
00:28:03,290 --> 00:28:06,750
R1 is the preferred NTP server.

411
00:28:06,750 --> 00:28:07,791
Why is that?

412
00:28:07,791 --> 00:28:09,800
It’s because of the stratum levels.

413
00:28:09,800 --> 00:28:13,929
NTP servers with lower stratum levels are
preferred, because they are closer to the

414
00:28:13,929 --> 00:28:14,929
source.

415
00:28:14,929 --> 00:28:17,970
So, they are considered more accurate.

416
00:28:17,970 --> 00:28:24,180
Okay, so I’ve shown you how to make a Cisco
device sync to an NTP server using the NTP

417
00:28:24,180 --> 00:28:25,590
SERVER command.

418
00:28:25,590 --> 00:28:30,179
For the next few concepts I’ll use a different
network, as shown below.

419
00:28:30,179 --> 00:28:35,400
If a device is already syncing to an NTP server,
meaning it’s an NTP client, it automatically

420
00:28:35,400 --> 00:28:40,220
acts as an NTP server too and other devices
can sync to it.

421
00:28:40,220 --> 00:28:43,330
But what if there is no NTP server to sync
to?

422
00:28:43,330 --> 00:28:47,700
You probably still want the devices in the
network to have the same time, even if it

423
00:28:47,700 --> 00:28:50,900
is slightly inaccurate compared to the actual
time.

424
00:28:50,900 --> 00:28:56,400
So, how can you manually configure a Cisco
device to operate as an NTP server, even though

425
00:28:56,400 --> 00:28:59,620
it isn’t synced to another NTP server?

426
00:28:59,620 --> 00:29:01,230
This is the command.

427
00:29:01,230 --> 00:29:03,070
NTP MASTER.

428
00:29:03,070 --> 00:29:07,900
As the description says it makes the device
act as an NTP master clock.

429
00:29:07,900 --> 00:29:13,460
So, on R1 I used the NTP MASTER command.

430
00:29:13,460 --> 00:29:16,840
Notice that I can specify the stratum of R1.

431
00:29:16,840 --> 00:29:20,760
However I chose to just enter the command,
which means it will use the default stratum

432
00:29:20,760 --> 00:29:21,760
level.

433
00:29:21,760 --> 00:29:22,870
What’s the default?

434
00:29:22,870 --> 00:29:24,260
Let’s check.

435
00:29:24,260 --> 00:29:27,660
I used SHOW NTP ASSOCIATIONS.

436
00:29:27,660 --> 00:29:33,410
The address of R1’s NTP server is now 127.127.1.1.

437
00:29:33,410 --> 00:29:34,970
What kind of address is that?

438
00:29:34,970 --> 00:29:36,820
It’s a loopback address.

439
00:29:36,820 --> 00:29:45,340
Remember, the entire 127.0.0.0/8 address range
is reserved for loopback addresses.

440
00:29:45,340 --> 00:29:49,630
Loopback addresses and loopback interfaces
are different concepts, although the names

441
00:29:49,630 --> 00:29:52,870
are similar, so don’t confuse the terms.

442
00:29:52,870 --> 00:29:57,410
Loopback interfaces are virtual interfaces
in the router and their addresses can be advertised

443
00:29:57,410 --> 00:30:01,040
to other devices using OSPF etc.

444
00:30:01,040 --> 00:30:05,510
Loopback addresses are a totally different
concept, these addresses are totally internal

445
00:30:05,510 --> 00:30:09,340
to the local device and can’t be reached
by other devices.

446
00:30:09,340 --> 00:30:14,010
Basically, R1 is using itself as its reference
clock.

447
00:30:14,010 --> 00:30:17,429
Anyway, the stratum level of this server is
7.

448
00:30:17,429 --> 00:30:20,880
So, what is the actual stratum level of R1?

449
00:30:20,880 --> 00:30:25,510
I used SHOW NTP STATUS to check, and the answer
is 8.

450
00:30:25,510 --> 00:30:31,810
So, remember that the default stratum of the
NTP MASTER command is 8.

451
00:30:31,810 --> 00:30:36,060
And I configured R2 and R3 to use R1 as their
NTP server.

452
00:30:36,060 --> 00:30:40,800
We’ve already covered that enough so let’s
move on to the next topic, symmetric active

453
00:30:40,800 --> 00:30:43,360
mode.

454
00:30:43,360 --> 00:30:47,760
So let’s configure symmetric active mode
between R2 and R3.

455
00:30:47,760 --> 00:30:52,800
They both have a stratum level of 9, so they
are equals in terms of NTP.

456
00:30:52,800 --> 00:30:57,590
They can become peers and help each other
sync their time, and also act as backups in

457
00:30:57,590 --> 00:31:00,730
case they lose contact with R1.

458
00:31:00,730 --> 00:31:05,680
The command to configure symmetric active
mode is NTP PEER, followed by the peer’s

459
00:31:05,680 --> 00:31:06,680
address.

460
00:31:06,680 --> 00:31:10,160
So, I configured R3 as R2’s peer.

461
00:31:10,160 --> 00:31:15,200
And here is the entry for R3 in R2’s NTP
association table.

462
00:31:15,200 --> 00:31:18,980
R3’s reference clock is R1, 10.0.12.1.

463
00:31:18,980 --> 00:31:23,090
Its stratum level is 9, because R1’s is
8.

464
00:31:23,090 --> 00:31:28,260
I did the same configurations on R3, specifying
R2 as the peer.

465
00:31:28,260 --> 00:31:35,230
Again, the reference clock is R1 and the stratum
level is 9.

466
00:31:35,230 --> 00:31:39,280
Okay the final topic for today is NTP authentication.

467
00:31:39,280 --> 00:31:44,260
I can’t say for sure if this is on the exam
or not, some study resources include it and

468
00:31:44,260 --> 00:31:45,770
some don’t.

469
00:31:45,770 --> 00:31:49,120
But I recommend learning these few commands
just in case there are some questions about

470
00:31:49,120 --> 00:31:53,790
NTP authentication on the CCNA exam.

471
00:31:53,790 --> 00:31:57,540
NTP authentication can be configured, but
it is optional.

472
00:31:57,540 --> 00:31:59,790
You don’t need to configure it.

473
00:31:59,790 --> 00:32:03,780
It allows NTP clients to ensure that they
only sync to the intended servers.

474
00:32:03,780 --> 00:32:08,420
They will check that the server is using the
same password as them, and only sync if they

475
00:32:08,420 --> 00:32:09,929
are the same.

476
00:32:09,929 --> 00:32:16,010
Here’s how you configure NTP authentication
in Cisco IOS, make sure the server and clients

477
00:32:16,010 --> 00:32:17,780
are configured the same.

478
00:32:17,780 --> 00:32:23,750
First, enable NTP authentication with the
command NTP AUTHENTICATE.

479
00:32:23,750 --> 00:32:27,230
Then you create the authentication key or
keys.

480
00:32:27,230 --> 00:32:31,590
You can create multiple keys, but don’t
worry about that for the CCNA-level.

481
00:32:31,590 --> 00:32:36,760
So, for the ‘key-number’ field just use
a number of 1, and then the ‘key’ field

482
00:32:36,760 --> 00:32:39,270
is the password itself.

483
00:32:39,270 --> 00:32:42,360
Then you have to specify which key or keys
are trusted.

484
00:32:42,360 --> 00:32:44,080
Don’t forget this step.

485
00:32:44,080 --> 00:32:51,770
Creating the key uses one command, NTP AUTHENTICATION-KEY,
and specifying that it is trusted uses another

486
00:32:51,770 --> 00:32:55,160
command, NTP TRUSTED-KEY.

487
00:32:55,160 --> 00:32:59,250
Finally you must specify which key to use
for each server.

488
00:32:59,250 --> 00:33:02,610
This command isn’t needed on the server
itself.

489
00:33:02,610 --> 00:33:09,170
Now let’s look at these configurations on
R1, R2, and R3.

490
00:33:09,170 --> 00:33:11,179
Here are the configurations.

491
00:33:11,179 --> 00:33:18,460
On all three routers I used NTP AUTHENTICATE,
NTP AUTHENTICATION-KEY 1 MD5 with a password

492
00:33:18,460 --> 00:33:23,330
of jeremysitlab, and NTP TRUSTED-KEY 1.

493
00:33:23,330 --> 00:33:31,080
Then on the clients R2 and R3 only, I used
the command NTP SERVER 10.0.12.1 KEY 1.

494
00:33:31,080 --> 00:33:36,990
So, they will use key number 1, which is jeremysitlab,
to authenticate R1.

495
00:33:36,990 --> 00:33:44,500
I also did one extra command, NTP PEER, followed
by the peer address, and KEY 1.

496
00:33:44,500 --> 00:33:49,420
This adds authentication to the peer relationship
between R2 and R3.

497
00:33:49,420 --> 00:33:57,179
Okay, so that’s all you need to configure
NTP authentication for the CCNA.

498
00:33:57,179 --> 00:34:02,920
In addition to the manual time configuration
commands, we just covered a lot of NTP commands.

499
00:34:02,920 --> 00:34:06,140
To help you review, here are the commands
we looked at.

500
00:34:06,140 --> 00:34:11,770
If you don’t remember any of these, go back
in the video to review.

501
00:34:11,770 --> 00:34:15,090
Before moving on to the quiz, let’s review
what we covered.

502
00:34:15,090 --> 00:34:18,600
We looked at why time is important for network
devices.

503
00:34:18,600 --> 00:34:23,380
The main reason from a CCNA perspective is
for accurate logging of events on your network

504
00:34:23,380 --> 00:34:25,720
devices.

505
00:34:25,720 --> 00:34:30,830
Then we looked at how to manually configure
the time and date in Cisco IOS.

506
00:34:30,830 --> 00:34:34,280
Then we looked at the basics of NTP and how
to configure it.

507
00:34:34,280 --> 00:34:39,850
We covered a lot already, but there is so
much more to learn about NTP.

508
00:34:39,850 --> 00:34:43,950
However I think the information we covered
in this video will be more than enough for

509
00:34:43,950 --> 00:34:46,580
the CCNA exam.

510
00:34:46,580 --> 00:34:51,460
Make sure to watch until the end of the quiz
for a bonus practice question from Boson Software’s

511
00:34:51,460 --> 00:34:55,980
ExSim for CCNA, the best practice exams for
the CCNA.

512
00:34:55,980 --> 00:35:01,110
Okay, let’s go to quiz question 1.

513
00:35:01,110 --> 00:35:05,110
Which of the following commands will cause
the router to adjust its software clock to

514
00:35:05,110 --> 00:35:07,350
match the hardware clock?

515
00:35:07,350 --> 00:35:08,850
Here are the commands.

516
00:35:08,850 --> 00:35:15,110
Pause the video to think about your answer.

517
00:35:15,110 --> 00:35:18,800
The answer is C, CLOCK READ-CALENDAR.

518
00:35:18,800 --> 00:35:23,550
This will cause the router to adjust its software
clock to match the hardware clock.

519
00:35:23,550 --> 00:35:27,750
D will do the opposite, it will cause the
router to adjust its hardware clock to match

520
00:35:27,750 --> 00:35:29,170
the software clock.

521
00:35:29,170 --> 00:35:32,040
A and B are not valid commands.

522
00:35:32,040 --> 00:35:37,010
Okay, let’s go to question 2.

523
00:35:37,010 --> 00:35:41,550
Which of the following commands can be used
to configure the time zone of the device?

524
00:35:41,550 --> 00:35:43,130
Here are the commands.

525
00:35:43,130 --> 00:35:49,310
Pause the video to think about your answer.

526
00:35:49,310 --> 00:35:55,359
The answer is D. From global config mode,
CLOCK TIMEZONE, then the timezone name and

527
00:35:55,359 --> 00:35:56,780
offset.

528
00:35:56,780 --> 00:36:01,460
Unlike some other time commands, this command
is done from global config mode and not privileged

529
00:36:01,460 --> 00:36:03,200
exec mode.

530
00:36:03,200 --> 00:36:06,609
You cannot configure the time zone with the
CLOCK SET command.

531
00:36:06,609 --> 00:36:12,220
Okay, let’s go to question 3.

532
00:36:12,220 --> 00:36:14,060
Examine the output below.

533
00:36:14,060 --> 00:36:17,890
Which of the following commands was configured
on R1?

534
00:36:17,890 --> 00:36:19,660
Here are the options.

535
00:36:19,660 --> 00:36:25,310
Pause the video now to think about your answer.

536
00:36:25,310 --> 00:36:29,530
The answer is A, NTP MASTER 9.

537
00:36:29,530 --> 00:36:36,590
Because the address of R1’s NTP association
is 127.127.1.1, a loopback address, we know

538
00:36:36,590 --> 00:36:39,330
that the NTP MASTER command was used.

539
00:36:39,330 --> 00:36:45,880
However, in this case the stratum must have
been specified as in A, NTP MASTER 9.

540
00:36:45,880 --> 00:36:51,650
The default stratum of the NTP MASTER command
is 8, so both C and D would have the same

541
00:36:51,650 --> 00:36:53,010
effect.

542
00:36:53,010 --> 00:36:59,390
In that case, however, SHOW NTP ASSOCIATIONS
should display a stratum of 7.

543
00:36:59,390 --> 00:37:05,810
In this output the stratum is 8, so the command
NTP MASTER 9 must have been used.

544
00:37:05,810 --> 00:37:14,210
Regarding option B, the command NTP SERVER
127.127.1.1 would be rejected by the router.

545
00:37:14,210 --> 00:37:18,971
You can’t manually configure a loopback
address as the NTP reference clock, even though

546
00:37:18,971 --> 00:37:22,530
it displays this way when the NTP MASTER command
is used.

547
00:37:22,530 --> 00:37:27,960
Okay, let’s go to question 4.

548
00:37:27,960 --> 00:37:33,210
Which of the following commands configures
the router to operate in NTP client mode?

549
00:37:33,210 --> 00:37:34,950
Here are the options.

550
00:37:34,950 --> 00:37:40,580
Pause the video now to think about your answer.

551
00:37:40,580 --> 00:37:44,870
The answer is C, NTP SERVER 216.239.35.0.

552
00:37:44,870 --> 00:37:51,010
It configures R1 to become a client of the
NTP server 216.239.35.0.

553
00:37:51,010 --> 00:37:56,960
A, NTP PEER, configures symmetric active mode.

554
00:37:56,960 --> 00:38:01,200
B, NTP MASTER, configures server mode.

555
00:38:01,200 --> 00:38:04,660
And D, NTP CLIENT, is not a valid command.

556
00:38:04,660 --> 00:38:09,800
Okay, let’s go to question 5.

557
00:38:09,800 --> 00:38:15,810
Which of the following commands must be configured
on an NTP client to enable NTP authentication?

558
00:38:15,810 --> 00:38:18,050
Select all that apply.

559
00:38:18,050 --> 00:38:19,780
Here are the options.

560
00:38:19,780 --> 00:38:24,990
Before I show the answers, let me say that
in the actual CCNA exam when you have to select

561
00:38:24,990 --> 00:38:29,600
multiple answers, the question will always
tell you how many to select.

562
00:38:29,600 --> 00:38:32,650
Select two, select three, etc.

563
00:38:32,650 --> 00:38:36,080
But for a challenge, let’s try ‘select
all that apply’.

564
00:38:36,080 --> 00:38:42,550
Okay, pause the video to think about your
answers.

565
00:38:42,550 --> 00:38:50,410
The answers are C, D, F, and G. C enables
NTP authentication on the device.

566
00:38:50,410 --> 00:38:52,880
D creates the authentication key.

567
00:38:52,880 --> 00:38:56,680
F specifies that the key is a trusted key.

568
00:38:56,680 --> 00:38:59,840
And G specifies the key to use with the server.

569
00:38:59,840 --> 00:39:02,620
Okay, that’s all for the quiz.

570
00:39:02,620 --> 00:39:08,850
Now let’s take a look at a bonus question
in Boson ExSim for CCNA.

571
00:39:08,850 --> 00:39:12,510
Okay here's today's Boson ExSim practice question.

572
00:39:12,510 --> 00:39:17,350
Which of the following is enabled on a Cisco
router when you issue the NTP SERVER command

573
00:39:17,350 --> 00:39:19,560
from global configuration mode?

574
00:39:19,560 --> 00:39:21,400
Select the best answer.

575
00:39:21,400 --> 00:39:24,619
Here are the options A, static client mode.

576
00:39:24,619 --> 00:39:27,020
B, symmetric active mode.

577
00:39:27,020 --> 00:39:29,630
C, broadcast client mode.

578
00:39:29,630 --> 00:39:31,260
D, server mode.

579
00:39:31,260 --> 00:39:33,980
And E, authentication.

580
00:39:33,980 --> 00:39:40,810
Okay pause the video now to select the best
answer.

581
00:39:40,810 --> 00:39:42,369
Okay let's check.

582
00:39:42,369 --> 00:39:46,619
So this is closely related to one of the quiz
questions we just did, so hopefully you got

583
00:39:46,619 --> 00:39:47,900
the correct answer.

584
00:39:47,900 --> 00:39:53,970
When you issue the NTP SERVER command you're
telling the router which NTP server it should

585
00:39:53,970 --> 00:39:55,119
sync to.

586
00:39:55,119 --> 00:39:58,859
So you are making the router an NTP client.

587
00:39:58,859 --> 00:40:06,560
So the answer is either A or C. Now in my
lecture video I didn't mention static client

588
00:40:06,560 --> 00:40:07,830
and broadcast client.

589
00:40:07,830 --> 00:40:10,980
I don't think you need to know this for the
CCNA.

590
00:40:10,980 --> 00:40:16,210
So the regular kind of NTP client that you
get when configuring the NTP SERVER command

591
00:40:16,210 --> 00:40:19,490
is A, static client mode.

592
00:40:19,490 --> 00:40:21,160
So that should be the correct answer.

593
00:40:21,160 --> 00:40:23,960
I'll click on show answer.

594
00:40:23,960 --> 00:40:26,670
And yes that is correct.

595
00:40:26,670 --> 00:40:29,350
So here is Boson's explanation.

596
00:40:29,350 --> 00:40:35,260
If you want to read about the broadcast client
mode it's written here.

597
00:40:35,260 --> 00:40:41,650
Okay, so you can pause the video to read that.

598
00:40:41,650 --> 00:40:47,070
And down here are the bottom there is a reference
to some Cisco documentation about the NTP

599
00:40:47,070 --> 00:40:51,440
SERVER command.

600
00:40:51,440 --> 00:40:54,570
Okay so that's Boson ExSim for the CCNA.

601
00:40:54,570 --> 00:40:59,560
As I have said many times before, these are
by far the best practice exams for the CCNA.

602
00:40:59,560 --> 00:41:04,210
So if you're preparing to take the real CCNA
exam, I highly recommend them.

603
00:41:04,210 --> 00:41:11,500
If you want to get Boson ExSim, please follow
the link in the video description.

604
00:41:11,500 --> 00:41:14,710
There are supplementary materials for this
video.

605
00:41:14,710 --> 00:41:17,590
There is a flashcard deck to use with the
software ‘Anki’.

606
00:41:17,590 --> 00:41:23,360
There will also be a packet tracer practice
lab so you can get some hands-on practice.

607
00:41:23,360 --> 00:41:26,020
That will be in the next video.

608
00:41:26,020 --> 00:41:29,630
Sign up for my mailing list via the link in
the description, and I’ll send you all of

609
00:41:29,630 --> 00:41:36,250
the flashcards and packet tracer lab files
for the course.

610
00:41:36,250 --> 00:41:41,060
Before finishing today’s video I want to
thank my JCNP-level channel members.

611
00:41:41,060 --> 00:41:44,910
To join, please click the ‘Join’ button
under the video.

612
00:41:44,910 --> 00:41:49,429
Thank you 
to Biraj, Magrathea, Samil, Junhong, Njabulo,

613
00:41:49,429 --> 00:41:56,574
Benjamin, Tshepiso, Justin, Prakaash, Nasir,
Erlison, Apogee, Marko, Daming, Jhilmar, Ed,

614
00:41:56,574 --> 00:42:04,180
Value, John, Funnydart, Velvijaykum, Mark,
Yousif, Boson Software, Devin, Lito, Yonatan,

615
00:42:04,180 --> 00:42:05,440
and Vance.

616
00:42:05,440 --> 00:42:10,910
Sorry if I pronounced your name incorrectly,
but thank you so much for your support.

617
00:42:10,910 --> 00:42:15,590
This is the list of JCNP-level members at
the time of recording by the way, December

618
00:42:15,590 --> 00:42:17,849
29th 2020.

619
00:42:17,849 --> 00:42:22,130
If you signed up recently and your name isn’t
on here don’t worry, you’ll be in future

620
00:42:22,130 --> 00:42:24,910
videos.

621
00:42:24,910 --> 00:42:25,960
Thank you for watching.

622
00:42:25,960 --> 00:42:30,400
Please subscribe to the channel, like the
video, leave a comment, and share the video

623
00:42:30,400 --> 00:42:33,730
with anyone else studying for the CCNA.

624
00:42:33,730 --> 00:42:36,340
If you want to leave a tip, check the links
in the description.

625
00:42:36,340 --> 00:42:42,230
I'm also a Brave verified publisher and accept
BAT, or Basic Attention Token, tips via the

626
00:42:42,230 --> 00:42:43,890
Brave browser.

627
00:42:43,890 --> 00:42:44,400
That's all for now.